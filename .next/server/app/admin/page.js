(()=>{var e={};e.id=698,e.ids=[698],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},5042:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>d});var r=s(260),a=s(8203),n=s(5155),i=s.n(n),l=s(7292),c={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let d=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7949)),"D:\\phongkham\\src\\app\\admin\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1354)),"D:\\phongkham\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,5076)),"D:\\phongkham\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,42)),"D:\\phongkham\\src\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,1485,23)),"next/dist/client/components/unauthorized-error"]}],o=["D:\\phongkham\\src\\app\\admin\\page.tsx"],x={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3285:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,9607,23))},9733:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,8531,23))},8814:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,3219,23)),Promise.resolve().then(s.t.bind(s,4863,23)),Promise.resolve().then(s.t.bind(s,5155,23)),Promise.resolve().then(s.t.bind(s,802,23)),Promise.resolve().then(s.t.bind(s,9350,23)),Promise.resolve().then(s.t.bind(s,8530,23)),Promise.resolve().then(s.t.bind(s,8921,23))},566:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,6959,23)),Promise.resolve().then(s.t.bind(s,3875,23)),Promise.resolve().then(s.t.bind(s,1284,23)),Promise.resolve().then(s.t.bind(s,7174,23)),Promise.resolve().then(s.t.bind(s,4178,23)),Promise.resolve().then(s.t.bind(s,7190,23)),Promise.resolve().then(s.t.bind(s,1365,23))},9772:(e,t,s)=>{Promise.resolve().then(s.bind(s,7949))},6620:(e,t,s)=>{Promise.resolve().then(s.bind(s,1036))},9188:(e,t,s)=>{Promise.resolve().then(s.bind(s,5076))},5988:(e,t,s)=>{Promise.resolve().then(s.bind(s,7576))},2930:()=>{},2314:()=>{},1036:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_});var r=s(5512),a=s(8009),n=s(5842),i=s(4825);let l=(0,i.A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var c=s(1398),d=s(6335),o=s(1255);let x=(0,i.A)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var h=s(1422);function m(){let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(!1),[m,u]=(0,a.useState)(null),[p,g]=(0,a.useState)({name:"",role:"Receptionist"});async function b(){i(!0);let{data:e}=await n.N.from("staff").select("*").order("id",{ascending:!0});e&&t(e),i(!1)}async function j(){if(!p.name||!p.role)return alert("Vui l\xf2ng nhập t\xean v\xe0 chức vụ");if(m){let{error:e}=await n.N.from("staff").update(p).eq("id",m);e||(u(null),g({name:"",role:"Receptionist"}),b())}else{let{error:e}=await n.N.from("staff").insert([p]);e||(g({name:"",role:"Receptionist"}),b())}}async function f(e,t){let{error:s}=await n.N.from("staff").update({is_active:!t}).eq("id",e);s||b()}return(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl border shadow-sm",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[(0,r.jsx)(l,{size:20,className:"text-primary"})," Quản l\xfd Nh\xe2n sự"]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6 flex gap-4 items-end border",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"block text-xs font-medium mb-1 text-gray-500",children:"Họ t\xean nh\xe2n vi\xean"}),(0,r.jsx)("input",{type:"text",className:"w-full border p-2 rounded text-sm",placeholder:"VD: Nguyễn Văn A",value:p.name,onChange:e=>g({...p,name:e.target.value})})]}),(0,r.jsxs)("div",{className:"w-48",children:[(0,r.jsx)("label",{className:"block text-xs font-medium mb-1 text-gray-500",children:"Chức vụ"}),(0,r.jsxs)("select",{className:"w-full border p-2 rounded text-sm",value:p.role,onChange:e=>g({...p,role:e.target.value}),children:[(0,r.jsx)("option",{value:"Receptionist",children:"Lễ t\xe2n"}),(0,r.jsx)("option",{value:"Doctor",children:"B\xe1c sĩ"}),(0,r.jsx)("option",{value:"Technician",children:"Kỹ thuật vi\xean"})]})]}),(0,r.jsxs)("button",{onClick:j,className:"bg-primary text-white px-4 py-2 rounded flex items-center gap-2 hover:bg-blue-600 transition-colors text-sm",children:[m?(0,r.jsx)(c.A,{size:16}):(0,r.jsx)(d.A,{size:16}),m?"Lưu":"Th\xeam"]}),m&&(0,r.jsx)("button",{onClick:function(){u(null),g({name:"",role:"Receptionist"})},className:"bg-gray-200 text-gray-700 px-4 py-2 rounded hover:bg-gray-300 transition-colors text-sm",children:(0,r.jsx)(o.A,{size:16})})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,r.jsx)("thead",{className:"bg-gray-100 text-gray-600 font-medium",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"p-3 rounded-tl-lg",children:"ID"}),(0,r.jsx)("th",{className:"p-3",children:"Họ t\xean"}),(0,r.jsx)("th",{className:"p-3",children:"Chức vụ"}),(0,r.jsx)("th",{className:"p-3",children:"Trạng th\xe1i"}),(0,r.jsx)("th",{className:"p-3 rounded-tr-lg text-right",children:"Thao t\xe1c"})]})}),(0,r.jsx)("tbody",{className:"divide-y",children:e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsxs)("td",{className:"p-3 text-gray-500",children:["#",e.id]}),(0,r.jsx)("td",{className:"p-3 font-medium",children:e.name}),(0,r.jsx)("td",{className:"p-3",children:(0,r.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium border ${"Doctor"===e.role?"bg-blue-50 text-blue-700 border-blue-200":"Receptionist"===e.role?"bg-purple-50 text-purple-700 border-purple-200":"bg-orange-50 text-orange-700 border-orange-200"}`,children:"Doctor"===e.role?"B\xe1c sĩ":"Receptionist"===e.role?"Lễ t\xe2n":"KTV"})}),(0,r.jsx)("td",{className:"p-3",children:(0,r.jsxs)("span",{className:`text-xs flex items-center gap-1 ${e.is_active?"text-green-600":"text-gray-400"}`,children:[(0,r.jsx)("span",{className:`w-2 h-2 rounded-full ${e.is_active?"bg-green-500":"bg-gray-300"}`}),e.is_active?"Hoạt động":"Đ\xe3 ẩn"]})}),(0,r.jsxs)("td",{className:"p-3 text-right flex justify-end gap-2",children:[(0,r.jsx)("button",{onClick:()=>{u(e.id),g({name:e.name,role:e.role})},className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded",title:"Sửa",children:(0,r.jsx)(x,{size:16})}),(0,r.jsx)("button",{onClick:()=>f(e.id,e.is_active),className:`p-1.5 rounded transition-colors ${e.is_active?"text-red-500 hover:bg-red-50":"text-green-500 hover:bg-green-50"}`,title:e.is_active?"Ẩn nh\xe2n vi\xean":"K\xedch hoạt lại",children:e.is_active?(0,r.jsx)(h.A,{size:16}):(0,r.jsx)(c.A,{size:16})})]})]},e.id))})]})})]})}var u=s(2092),p=s(5899),g=s(9031),b=s(3540);function j(){let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(!1),[l,d]=(0,a.useState)(""),[m,j]=(0,a.useState)(null),[f,v]=(0,a.useState)({}),[y,N]=(0,a.useState)(null);async function w(){i(!0);let{data:e}=await n.N.from("patients").select("*").order("created_at",{ascending:!1}).limit(20);e&&t(e),i(!1)}async function k(){if(!l){w();return}i(!0);let{data:e}=await n.N.from("patients").select("*").or(`full_name.ilike.%${l}%,cccd.eq.${l}`).limit(20);e&&t(e),i(!1)}async function C(){if(!m)return;let{error:s}=await n.N.from("patients").update(f).eq("id",m);s?alert("Lỗi khi lưu!"):(i(!0),t(e.map(e=>e.id===m?{...e,...f}:e)),j(null),i(!1))}async function A(s){if(!confirm("H\xe0nh động n\xe0y kh\xf4ng thể ho\xe0n t\xe1c. Bạn chắc chắn chứ?"))return;i(!0),await n.N.from("visits").delete().eq("patient_id",s);let{error:r}=await n.N.from("patients").delete().eq("id",s);r?alert("Lỗi khi x\xf3a: "+r.message):(t(e.filter(e=>e.id!==s)),alert("Đ\xe3 x\xf3a bệnh nh\xe2n th\xe0nh c\xf4ng.")),i(!1)}return(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl border shadow-sm",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[(0,r.jsx)(u.A,{size:20,className:"text-primary"})," Quản l\xfd Bệnh nh\xe2n"]}),(0,r.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,r.jsx)("input",{type:"text",className:"flex-1 border p-2 rounded-lg text-sm",placeholder:"T\xecm theo T\xean hoặc CCCD...",value:l,onChange:e=>d(e.target.value),onKeyDown:e=>"Enter"===e.key&&k()}),(0,r.jsxs)("button",{onClick:k,className:"bg-primary text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2 text-sm",children:[(0,r.jsx)(p.A,{size:16})," T\xecm kiếm"]})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,r.jsx)("thead",{className:"bg-gray-100 text-gray-600 font-medium",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"p-3 rounded-tl-lg",children:"CCCD"}),(0,r.jsx)("th",{className:"p-3",children:"Họ t\xean"}),(0,r.jsx)("th",{className:"p-3",children:"Năm sinh"}),(0,r.jsx)("th",{className:"p-3",children:"SĐT"}),(0,r.jsx)("th",{className:"p-3",children:"Địa chỉ"}),(0,r.jsx)("th",{className:"p-3 rounded-tr-lg text-right",children:"Sửa"})]})}),(0,r.jsxs)("tbody",{className:"divide-y",children:[s&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:6,className:"p-4 text-center text-gray-400",children:"Đang tải..."})}),!s&&0===e.length&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:6,className:"p-4 text-center text-gray-400 italic",children:"Nhập từ kh\xf3a để t\xecm kiếm..."})}),e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"p-3",children:m===e.id?(0,r.jsx)("input",{value:f.cccd||"",onChange:e=>v({...f,cccd:e.target.value}),className:"w-full border p-1 rounded"}):e.cccd}),(0,r.jsx)("td",{className:"p-3 font-medium",children:m===e.id?(0,r.jsx)("input",{value:f.full_name||"",onChange:e=>v({...f,full_name:e.target.value}),className:"w-full border p-1 rounded"}):e.full_name}),(0,r.jsx)("td",{className:"p-3",children:m===e.id?(0,r.jsx)("input",{type:"date",value:f.dob?new Date(f.dob).toISOString().split("T")[0]:"",onChange:e=>v({...f,dob:e.target.value}),className:"w-24 border p-1 rounded"}):e.dob?new Date(e.dob).getFullYear():"-"}),(0,r.jsx)("td",{className:"p-3",children:m===e.id?(0,r.jsx)("input",{value:f.phone||"",onChange:e=>v({...f,phone:e.target.value}),className:"w-full border p-1 rounded"}):e.phone}),(0,r.jsx)("td",{className:"p-3 max-w-[200px] truncate",title:e.address||"",children:m===e.id?(0,r.jsx)("input",{value:f.address||"",onChange:e=>v({...f,address:e.target.value}),className:"w-full border p-1 rounded"}):e.address}),(0,r.jsx)("td",{className:"p-3 text-right",children:m===e.id?(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)("button",{onClick:C,className:"text-green-600 hover:bg-green-50 p-1.5 rounded",children:(0,r.jsx)(c.A,{size:16})}),(0,r.jsx)("button",{onClick:()=>j(null),className:"text-gray-500 hover:bg-gray-100 p-1.5 rounded",children:(0,r.jsx)(o.A,{size:16})})]}):(0,r.jsxs)("div",{className:"flex gap-1 justify-end",children:[(0,r.jsx)("button",{onClick:()=>{j(e.id),v({...e})},className:"text-blue-600 hover:bg-blue-50 p-1.5 rounded",title:"Sửa",children:(0,r.jsx)(x,{size:16})}),(0,r.jsx)("button",{onClick:()=>N(e),className:"text-purple-600 hover:bg-purple-50 p-1.5 rounded",title:"Xem bệnh sử",children:(0,r.jsx)(g.A,{size:16})}),(0,r.jsx)("button",{onClick:()=>{confirm(`CẢNH B\xc1O: X\xf3a bệnh nh\xe2n ${e.full_name} sẽ x\xf3a to\xe0n bộ lịch sử kh\xe1m!
Bạn c\xf3 chắc chắn kh\xf4ng?`)&&A(e.id)},className:"text-red-600 hover:bg-red-50 p-1.5 rounded",title:"X\xf3a vĩnh viễn",children:(0,r.jsx)(h.A,{size:16})})]})})]},e.id))]})]})}),y&&(0,r.jsx)(b.A,{patient:y,onClose:()=>N(null)})]})}let f=(0,i.A)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);var v=s(5637),y=s(7144);function N(){let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(!1),[l,m]=(0,a.useState)({name:"",price:""}),[u,p]=(0,a.useState)(null),[g,b]=(0,a.useState)({price:"",name:""}),[j,N]=(0,a.useState)(null);async function w(){i(!0);let{data:e,error:s}=await n.N.from("service_catalog").select("*").order("id",{ascending:!0});e?t(e):s&&(console.error(s),"42P01"===s.code&&N({type:"error",text:'Bảng dữ liệu "service_catalog" chưa được tạo. Vui l\xf2ng chạy SQL trong db/schema.sql'})),i(!1)}async function k(){if(!l.name||!l.price)return;i(!0);let{error:e}=await n.N.from("service_catalog").insert([{name:l.name,price:Number(l.price),is_active:!0}]);e?N({type:"error",text:"Lỗi: "+e.message}):(m({name:"",price:""}),w(),N({type:"success",text:"Th\xeam dịch vụ th\xe0nh c\xf4ng"})),i(!1)}async function C(e){i(!0);let{error:t}=await n.N.from("service_catalog").update({name:g.name,price:Number(g.price)}).eq("id",e);t?N({type:"error",text:"Lỗi cập nhật: "+t.message}):(p(null),w(),N({type:"success",text:"Cập nhật th\xe0nh c\xf4ng"})),i(!1)}async function A(e,t){let{error:s}=await n.N.from("service_catalog").update({is_active:!t}).eq("id",e);s||w()}async function _(e){if(!confirm("Bạn c\xf3 chắc muốn x\xf3a dịch vụ n\xe0y?"))return;let{error:t}=await n.N.from("service_catalog").delete().eq("id",e);t?N({type:"error",text:"Lỗi x\xf3a: "+t.message}):(w(),N({type:"success",text:"Đ\xe3 x\xf3a dịch vụ"}))}return(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl border shadow-sm",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold mb-6 flex items-center gap-2",children:[(0,r.jsx)(f,{size:20,className:"text-primary"})," Quản l\xfd Dịch vụ & Bảng gi\xe1"]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6 flex gap-3 items-end border",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"T\xean dịch vụ"}),(0,r.jsx)("input",{className:"w-full border p-2 rounded text-sm",placeholder:"V\xed dụ: Si\xeau \xe2m bụng, X-Quang...",value:l.name,onChange:e=>m({...l,name:e.target.value})})]}),(0,r.jsxs)("div",{className:"w-40",children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Đơn gi\xe1 (VNĐ)"}),(0,r.jsx)("input",{type:"number",className:"w-full border p-2 rounded text-sm",placeholder:"0",value:l.price,onChange:e=>m({...l,price:e.target.value})})]}),(0,r.jsxs)("button",{onClick:k,disabled:s||!l.name||!l.price,className:"bg-primary text-white px-4 py-2 rounded hover:bg-blue-600 disabled:opacity-50 flex items-center gap-2 text-sm h-[38px]",children:[(0,r.jsx)(d.A,{size:16})," Th\xeam"]})]}),j&&(0,r.jsxs)("div",{className:`mb-4 p-3 rounded flex items-center gap-2 text-sm ${"success"===j.type?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:["success"===j.type?(0,r.jsx)(v.A,{size:16}):(0,r.jsx)(y.A,{size:16}),j.text]}),(0,r.jsx)("div",{className:"overflow-hidden border rounded-lg",children:(0,r.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,r.jsx)("thead",{className:"bg-gray-100 text-gray-600 font-medium",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"p-3",children:"T\xean dịch vụ"}),(0,r.jsx)("th",{className:"p-3 text-right",children:"Đơn gi\xe1"}),(0,r.jsx)("th",{className:"p-3 text-center",children:"Trạng th\xe1i"}),(0,r.jsx)("th",{className:"p-3 text-right",children:"Thao t\xe1c"})]})}),(0,r.jsxs)("tbody",{className:"divide-y",children:[0===e.length&&!s&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:4,className:"p-4 text-center text-gray-400",children:"Chưa c\xf3 dịch vụ n\xe0o."})}),e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"p-3",children:u===e.id?(0,r.jsx)("input",{value:g.name,onChange:e=>b({...g,name:e.target.value}),className:"border p-1 rounded w-full"}):(0,r.jsx)("span",{className:e.is_active?"":"text-gray-400 line-through",children:e.name})}),(0,r.jsx)("td",{className:"p-3 text-right font-mono",children:u===e.id?(0,r.jsx)("input",{type:"number",value:g.price,onChange:e=>b({...g,price:e.target.value}),className:"border p-1 rounded w-32 text-right"}):e.price.toLocaleString("vi-VN")+" ₫"}),(0,r.jsx)("td",{className:"p-3 text-center",children:(0,r.jsx)("button",{onClick:()=>A(e.id,e.is_active),className:`px-2 py-0.5 rounded text-xs border ${e.is_active?"bg-green-50 text-green-700 border-green-200":"bg-gray-100 text-gray-500 border-gray-200"}`,children:e.is_active?"Đang d\xf9ng":"Đ\xe3 ẩn"})}),(0,r.jsx)("td",{className:"p-3 text-right",children:u===e.id?(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)("button",{onClick:()=>C(e.id),className:"text-green-600 p-1 hover:bg-green-50 rounded",children:(0,r.jsx)(c.A,{size:16})}),(0,r.jsx)("button",{onClick:()=>p(null),className:"text-gray-500 p-1 hover:bg-gray-100 rounded",children:(0,r.jsx)(o.A,{size:16})})]}):(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)("button",{onClick:()=>{p(e.id),b({name:e.name,price:e.price.toString()})},className:"text-blue-600 p-1 hover:bg-blue-50 rounded",children:(0,r.jsx)(x,{size:16})}),(0,r.jsx)("button",{onClick:()=>_(e.id),className:"text-red-600 p-1 hover:bg-red-50 rounded",children:(0,r.jsx)(h.A,{size:16})})]})})]},e.id))]})]})})]})}var w=s(6772);function k(){let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(!1),[l,m]=(0,a.useState)({name:"",unit:""}),[u,p]=(0,a.useState)(null),[g,b]=(0,a.useState)({name:"",unit:""}),[j,f]=(0,a.useState)(null);async function N(){i(!0);let{data:e,error:s}=await n.N.from("medications").select("id, name, unit, is_active").order("name",{ascending:!0});e?t(e):s&&(console.error("Error fetching meds:",s),f({type:"error",text:"Lỗi tải danh s\xe1ch thuốc: "+(s.message||"Kh\xf4ng r\xf5")})),i(!1)}async function k(){if(!l.name||!l.unit)return;i(!0);let{error:e}=await n.N.from("medications").insert([{name:l.name,unit:l.unit,is_active:!0}]);e?f({type:"error",text:"Lỗi: "+e.message}):(m({name:"",unit:""}),N(),f({type:"success",text:"Th\xeam thuốc th\xe0nh c\xf4ng"})),i(!1)}async function C(e){i(!0);let{error:t}=await n.N.from("medications").update({name:g.name,unit:g.unit}).eq("id",e);t?f({type:"error",text:"Lỗi cập nhật: "+t.message}):(p(null),N(),f({type:"success",text:"Cập nhật th\xe0nh c\xf4ng"})),i(!1)}async function A(e,t){let{error:s}=await n.N.from("medications").update({is_active:!t}).eq("id",e);s||N()}async function _(e){if(!confirm("Bạn c\xf3 chắc muốn x\xf3a thuốc n\xe0y?"))return;let{error:t}=await n.N.from("medications").delete().eq("id",e);t?f({type:"error",text:"Lỗi x\xf3a: "+t.message}):(N(),f({type:"success",text:"Đ\xe3 x\xf3a thuốc"}))}return(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl border shadow-sm",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold mb-6 flex items-center gap-2",children:[(0,r.jsx)(w.A,{size:20,className:"text-primary"})," Danh s\xe1ch Thuốc (Đơn giản)"]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6 flex gap-3 items-end border",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"T\xean thuốc"}),(0,r.jsx)("input",{className:"w-full border p-2 rounded text-sm",placeholder:"V\xed dụ: Paracetamol 500mg...",value:l.name,onChange:e=>m({...l,name:e.target.value})})]}),(0,r.jsxs)("div",{className:"w-32",children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Đơn vị"}),(0,r.jsx)("input",{className:"w-full border p-2 rounded text-sm",placeholder:"Vi\xean, Vỉ...",value:l.unit,onChange:e=>m({...l,unit:e.target.value})})]}),(0,r.jsxs)("button",{onClick:k,disabled:s||!l.name||!l.unit,className:"bg-primary text-white px-4 py-2 rounded hover:bg-blue-600 disabled:opacity-50 flex items-center gap-2 text-sm h-[38px]",children:[(0,r.jsx)(d.A,{size:16})," Th\xeam"]})]}),j&&(0,r.jsxs)("div",{className:`mb-4 p-3 rounded flex items-center gap-2 text-sm ${"success"===j.type?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:["success"===j.type?(0,r.jsx)(v.A,{size:16}):(0,r.jsx)(y.A,{size:16}),j.text]}),(0,r.jsx)("div",{className:"overflow-hidden border rounded-lg",children:(0,r.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,r.jsx)("thead",{className:"bg-gray-100 text-gray-600 font-medium",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"p-3",children:"T\xean thuốc"}),(0,r.jsx)("th",{className:"p-3 w-32",children:"Đơn vị"}),(0,r.jsx)("th",{className:"p-3 text-center w-32",children:"Trạng th\xe1i"}),(0,r.jsx)("th",{className:"p-3 text-right w-24",children:"Thao t\xe1c"})]})}),(0,r.jsxs)("tbody",{className:"divide-y",children:[0===e.length&&!s&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:4,className:"p-4 text-center text-gray-400",children:"Danh s\xe1ch trống."})}),e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"p-3",children:u===e.id?(0,r.jsx)("input",{value:g.name,onChange:e=>b({...g,name:e.target.value}),className:"border p-1 rounded w-full"}):(0,r.jsxs)("div",{className:"font-medium",children:[e.name,!e.is_active&&(0,r.jsx)("span",{className:"ml-2 text-xs bg-gray-200 text-gray-500 px-1 rounded",children:"Đ\xe3 ẩn"})]})}),(0,r.jsx)("td",{className:"p-3",children:u===e.id?(0,r.jsx)("input",{value:g.unit,onChange:e=>b({...g,unit:e.target.value}),className:"border p-1 rounded w-full"}):(0,r.jsx)("span",{className:"text-gray-500",children:e.unit})}),(0,r.jsx)("td",{className:"p-3 text-center",children:(0,r.jsx)("button",{onClick:()=>A(e.id,e.is_active),className:`px-2 py-0.5 rounded text-xs border ${e.is_active?"bg-green-50 text-green-700 border-green-200":"bg-gray-100 text-gray-500 border-gray-200"}`,children:e.is_active?"Hiện":"Ẩn"})}),(0,r.jsx)("td",{className:"p-3 text-right",children:u===e.id?(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)("button",{onClick:()=>C(e.id),className:"text-green-600 p-1 hover:bg-green-50 rounded",children:(0,r.jsx)(c.A,{size:16})}),(0,r.jsx)("button",{onClick:()=>p(null),className:"text-gray-500 p-1 hover:bg-gray-100 rounded",children:(0,r.jsx)(o.A,{size:16})})]}):(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)("button",{onClick:()=>{p(e.id),b({name:e.name,unit:e.unit})},className:"text-blue-600 p-1 hover:bg-blue-50 rounded",children:(0,r.jsx)(x,{size:16})}),(0,r.jsx)("button",{onClick:()=>_(e.id),className:"text-red-600 p-1 hover:bg-red-50 rounded",children:(0,r.jsx)(h.A,{size:16})})]})})]},e.id))]})]})})]})}let C=(0,i.A)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var A=s(111);function _(){let[e,t]=(0,a.useState)("staff");return(0,r.jsxs)("div",{className:"container mx-auto p-4 max-w-6xl",children:[(0,r.jsxs)("header",{className:"mb-8",children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 flex items-center gap-2",children:[(0,r.jsx)(C,{className:"text-primary",size:32}),"Quản trị Hệ thống"]}),(0,r.jsx)("p",{className:"text-gray-500 mt-2",children:"Quản l\xfd nh\xe2n sự, dịch vụ v\xe0 kho thuốc"})]}),(0,r.jsxs)("div",{className:"flex gap-2 mb-6 border-b overflow-x-auto",children:[(0,r.jsxs)("button",{onClick:()=>t("staff"),className:`px-6 py-3 font-medium text-sm flex items-center gap-2 border-b-2 transition-colors whitespace-nowrap ${"staff"===e?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[(0,r.jsx)(A.A,{size:18})," Nh\xe2n sự"]}),(0,r.jsxs)("button",{onClick:()=>t("patients"),className:`px-6 py-3 font-medium text-sm flex items-center gap-2 border-b-2 transition-colors whitespace-nowrap ${"patients"===e?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[(0,r.jsx)(A.A,{size:18})," Bệnh nh\xe2n"]}),(0,r.jsxs)("button",{onClick:()=>t("services"),className:`px-6 py-3 font-medium text-sm flex items-center gap-2 border-b-2 transition-colors whitespace-nowrap ${"services"===e?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[(0,r.jsx)(f,{size:18})," Dịch vụ & Gi\xe1"]}),(0,r.jsxs)("button",{onClick:()=>t("medications"),className:`px-6 py-3 font-medium text-sm flex items-center gap-2 border-b-2 transition-colors whitespace-nowrap ${"medications"===e?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[(0,r.jsx)(w.A,{size:18})," Kho Thuốc"]})]}),(0,r.jsxs)("main",{className:"animate-in fade-in duration-300",children:["staff"===e&&(0,r.jsx)(m,{}),"patients"===e&&(0,r.jsx)(j,{}),"services"===e&&(0,r.jsx)(N,{}),"medications"===e&&(0,r.jsx)(k,{})]})]})}},7576:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(5512);function a({error:e,reset:t}){return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gray-50",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Đ\xe3 xảy ra lỗi!"}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border max-w-md w-full mb-6",children:[(0,r.jsx)("p",{className:"text-gray-600 mb-2",children:"Chi tiết lỗi:"}),(0,r.jsx)("code",{className:"block bg-gray-100 p-2 rounded text-sm overflow-x-auto text-red-500 mb-4",children:e.message||"Lỗi kh\xf4ng x\xe1c định"})]}),(0,r.jsx)("button",{onClick:()=>t(),className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-blue-600 transition-colors",children:"Thử lại"})]})}s(8009)},5842:(e,t,s)=>{"use strict";s.d(t,{N:()=>r});let r=(0,s(8782).UU)("https://eepuidxxtvcnxrcvmuhi.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVlcHVpZHh4dHZjbnhyY3ZtdWhpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAyMjMwMzEsImV4cCI6MjA4NTc5OTAzMX0.G6f79KaWfav0Dy4Zw_gZ9Vvd89C2NPqw6n3WWC4_y74")},7949:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\phongkham\\\\src\\\\app\\\\admin\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\phongkham\\src\\app\\admin\\page.tsx","default")},5076:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\phongkham\\\\src\\\\app\\\\error.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\phongkham\\src\\app\\error.tsx","default")},1354:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>a});var r=s(2740);s(1135);let a={title:"ClinicFlow - Quản l\xfd Ph\xf2ng Kh\xe1m",description:"Hệ thống quản l\xfd luồng bệnh nh\xe2n chuy\xean nghiệp"};function n({children:e}){return(0,r.jsx)("html",{lang:"vi",suppressHydrationWarning:!0,children:(0,r.jsx)("body",{suppressHydrationWarning:!0,children:e})})}},42:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(2740),a=s(9607),n=s.n(a);function i(){return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50",children:[(0,r.jsx)("h2",{className:"text-4xl font-bold text-primary mb-4",children:"404 - Kh\xf4ng t\xecm thấy trang"}),(0,r.jsx)("p",{className:"text-gray-600 mb-8",children:"Xin lỗi, trang bạn t\xecm kiếm kh\xf4ng tồn tại."}),(0,r.jsx)(n(),{href:"/",className:"px-6 py-3 bg-primary text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Quay về Trang chủ"})]})}},1135:()=>{},7144:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(4825).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},5637:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(4825).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},5899:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(4825).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},1422:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(4825).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[581,294,357],()=>s(5042));module.exports=r})();